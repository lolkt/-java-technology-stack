### 对服务平台性能要求的理解

#### 1、服务平台处理能力

​      为了同时支持不低于8000的线上用户使用，本项目采用分布式部署架构、为了提高服务平台处理能力，采用多种技术调高响应速度，部分策略如下：

1、负载均衡策：采用负载均衡策略，提高服务器响应速度，解决网络拥塞问题，达到高质量的网络访问效果。
2、缓存策略：缓存之所以能够大幅提高系统的性能，关键在于二八定律：百分之八十的数据访问是集中在 20% 的数据上。利用空间换时间的思想，使用Redis分布式缓存服务，一致性 Hash 算法，保证数据都能能够平均的缓存到每一台机器。

3、预处理和延后处理
预处理：比如缓存预热，通过预先处理减少了实时链路上的 RPC 调用，既减少了系统的外部依赖，也极大的提高了系统的吞吐量
延后处理：比如中了金额的延期到账，如果去实时的做到账，那么大概率数据库的 TPS（每秒处理的事务数） 会是瓶颈。

4、消息队列
消息队列的核心思想就是把同步的操作变成异步处理，对于处理耗时的任务，如果采用同步的方式，那么会增加任务耗时，降低系统并发度。将非核心操作异步处理，不会阻塞住主流程。
服务解耦：引入消息队列作为中间层，如果增加新的下游服务，只需要订阅事件即可，完全不用改动发布服务，完成系统解耦。
5、批量处理
在涉及到网络连接、IO等情况时，将操作批量进行处理能够有效提高系统的传输速率和吞吐量。
在前后端通信中，通过合并一些频繁请求的小资源可以获得更快的加载速度。
6、数据库
通过添加索引、读写分离、分库分表等技术提高我们检索数据的效率。



#### 2、稳定性与完整性

​       系统具有较高的稳定性，综合可靠性包括服务器、浏览器、客户端、小程序等所有环节正常运行。

1、系统设计

系统采用分布式部署架构、使用负载均衡策、采用Centos7.8系统、云数据库RDS MySQL 版等安全策略保证系统稳定性;

2、故障恢复

在遇到故障时、通过监控系统、及时发出报警信息，响应后快速处理；

3、数据备份

系统数据文件要求定期完整备份、差异化备份；

4、系统性能调优

分为三步：一、需找性能瓶颈，二、针对瓶颈做优化，三、压测看优化的效果，逐步迭代，最终达到性能的要求。在这个过程中，需要进行多次压力测试，模拟多用户请求，用来发现瓶颈。

具体章节见"软件技术方案-处理能力、系统稳定性与完整性设计方案"。

#### 3、安全性要求

​        系统需要切实做好安全，保障系统的安全，防止各种攻击行为，保证数据和信息的安全。安全性包括系统安全、网络安全、数据安全、操作系统安全、数据库安全、WEB应用安全等，做好各个操作的记录日志等。

系统实现等保二级，风险评估、安全监测、通报预警、案事件调查、数据防护、灾难备份、应急处置、自主可控、供应链安全、效果评价、综治考核等这些与网络安全密切相关的措施都将全部纳入等级保护制度并加以实施。

具体章节见"软件技术方案-系统安全架构设计方案"。

#### 4、开放性要求

​        统一的标准化接口，实现对外部系统的接入提供企业级的支持。在进行扩容、新业务扩展时，应能提供快速、方便和准确的实现方式。

 支持所有用户通过浏览器、微信、钉钉、代销者应用等主流PC和手机软件登陆和使用系统和门户。

支持集成到国家体育总局体育彩票管理中心研发的代销者应用程序中使用。具体章节见“软件技术方案-系统开放性与可拓展性设计方案”。

#### 5、可拓展性要求

可扩展性的架构设计应当符合开闭原则：对扩展开发，对修改关闭。
衡量一个软件系统具备良好可扩展性主要表现但不限于：
软件内部方面：在软件系统实现新增业务时，对现有系统功能影响较少，即不需要对先用功能做任何改动或很少改动。
软件外部方面：软件系统本身与其他存在协同关系的外部系统之间存在松耦合关系，软件系统的变化对其他软件系统无影响，其他软件系统和功能不需要进行改动。
开闭原则明确的告诉我们：软件实现应该对扩展开放，对修改关闭，其含义是说一个软件实体应该通过扩展来实现变化，而不是通过修改已有的代码来实现变化的。

本系统通过引擎技术，包括流程引擎、任务引擎、问卷引擎等通用功能，实现可配置、易拓展、高复用、速实现的功能支撑。我方提供的通用功能以及其应用进行简略介绍，具体引擎相关的技术性描述，具体章节见“软件技术方案-系统开放型与可拓展性设计方案”。

#### 6、对接统一身份认证平台

​        渠道业务系统登录账号与认证接口，按照****统一身份认证平台接入公众侧、政务侧规范接口设计，完成身份认证，并通过信任传递与其他系统实现单点登录。支持所有用户通过浏览器、微信、钉钉、代销者应用等主流PC和手机软件登陆和使用系统和门户。

与销量查询平台、配送平台、信息发布平台、培训平台等其他平台统一入口，实现“一个账号、一次登陆、一个入口、全省通用”。

具体章节见“软件技术方案-系统开放性与可拓展性设计方案-统一身份认证”。

#### 7、日志管理要求

​       日志根据各业务分为四类（用户登录认证日志、帐户活动日志、系统开关及故障日志、与其他系统交互日志）、细分为六个等级（TRACE级、DEBUG级、INFO级、WARN级、ERROR级、FATAL级），日志存储时间大于8年 。

以下在业务管理和运维安全两个方面，对日志管理进一步优化。

业务管理方面：关键业务处理过程及系统异常时有详细、完备的日志记录，日志可以分级、分类记录和查询。

运维安全方面：记录账号变更，监控账号及用户组的变化，包括增加、删除、修改等；

可以监控服务器的操作日志，数据包括账号、操作用户、时间等。

记录主机行为，便于分析管控。通过日志管理，可以更清晰的了解到攻击者的行为、进程等异常行为，对于攻击溯源起到了很好的支撑作用,为安全防线的构建和升级优化提供了指引方向。

具体章节见“系统安全架构设计方案-系统日志机制”。



